<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="dns-prefetch" href="https://o243f9mnq.qnssl.com/" />
    <link rel="dns-prefetch" href="//cdn.bootcss.com" />
    <link rel="dns-prefetch" href="//secure.gravatar.com" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    
    <link rel="shortcut icon" href="https://pen1120.github.io/images/favicon.png">
    <link rel="apple-touch-icon" href="https://pen1120.github.io/images/apple-touch-icon.png">
    <title>
        
        Ubuntu重装 - Zen
        
    </title>
    <meta name="keywords" content=" " />
    <meta name="description" content=" " />
    <link href="//cdn.bootcss.com/highlight.js/9.10.0/styles/xcode.min.css" rel="stylesheet">
    <link href="https://pen1120.github.io/css/style.min.css?20170331" rel="stylesheet">
    
</head>


<body class="bg-white" gtools_scp_screen_capture_injected="true">
    
    <header id="header" class="header bg-white">
        <div class="navbar-container">
            <a href="https://pen1120.github.io" class="navbar-logo" style="color: #5f5f5f">Zen</a>
            <div class="navbar-menu">
            
                <a href="https://pen1120.github.io/post/">文章</a>  
            
                <a href="https://pen1120.github.io/tags/">标签</a>  
            
                <a href="https://pen1120.github.io/about">关于</a>  
            
            </div>
            
            <div class="navbar-mobile-menu" onclick=""> 
                <span class="icon-menu cross"><span class="middle"></span></span>
                <ul>
                
                <li><a href="https://pen1120.github.io/post/">文章</a></li> 
                
                <li><a href="https://pen1120.github.io/tags/">标签</a></li> 
                
                <li><a href="https://pen1120.github.io/about">关于</a></li> 
                
                </ul>
            </div>
        </div>
    </header>
    <article class="main-content page-page">
        <div class="post-header">
            <h1 class="post-title" itemprop="name headline">
                Ubuntu重装
            </h1>
            <div class="post-data">
                Published on Jan 26, 2018 ,5 min reading time
            </div>
        </div>
        <div id="post-content" class="post-content">
            
<p class="post-tags"> 
	
	<a href="https://pen1120.github.io/tags/ubuntu">Ubuntu</a>
	
	<a href="https://pen1120.github.io/tags/non-tech">non-tech</a>
	
</p>

 <p>#-2 vi ~/.bashrc</p>

<pre><code>alias vb='vi ~/.bashrc'
alias sb='source ~/.bashrc'
alias dow='cd /home/pen/Downloads'
alias doc='cd /home/pen/Documents'
alias af='sudo apt -f install'
alias au='sudo apt update'
alias arm='sudo apt autoremove'

#mysql
alias m9527='/apps/svr/mysql/bin/mysql -udba --socket=/tmp/mysql9527.sock -plocaldba'
alias sm9527='/apps/svr/mysql/bin/mysqld_safe --defaults-file=/apps/conf/mysql/mysql57_9527.cnf &amp; &gt;/dev/null'
alias lm=&quot;ps aux | grep mysql &quot;

export XMODIFIERS=&quot;@im=fcitx&quot;

export PATH=$PATH:/apps/svr/mysql/bin
</code></pre>

<p>#-1 apt换源</p>

<pre><code>#北京的apt选择搜狐源，广东的apt选择网易源
#但是要提防换源可能导致apt resource里的依赖库版本过高，以至于很多软件无法正常安装
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
sudo echo '' &gt; /etc/apt/sources.list &amp;&amp; sudo vi /etc/apt/sources.list
</code></pre>

<pre><code>deb http://mirrors.163.com/ubuntu/ trusty main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ trusty-security main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ trusty-updates main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ trusty-proposed main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ trusty-backports main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ trusty main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ trusty-security main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ trusty-updates main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ trusty-proposed main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ trusty-backports main restricted universe multiverse
</code></pre>

<pre><code>sudo apt update
sudo apt upgrade
</code></pre>

<p>#0 开启SSH服务</p>

<pre><code>sudo apt-get install openssh-server
sudo vi /etc/ssh/sshd_config
sudo /etc/init.d/ssh start
</code></pre>

<p>#1 Chrome
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.ubuntuchrome.com/">Chrome下载地址 </a></p>

<pre><code>sudo apt install libindicator7 libappindicator1 #optional
sudo dpkg -i chrome.deb
</code></pre>

<p>#2 XX-net</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/XX-net/XX-Net.git">XX-net git下载地址</a></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/shadowsocks/shadowsocks-qt5/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97">Shadowsocks-qt5下载地址</a></p>

<pre><code>#证书导入
sudo apt-get install libnss3-tools
sudo certutil -d sql:$HOME/.pki/nssdb -A -t TC -n &quot;goagent&quot; -i /home/pen/apps/xxnet/data/gae_proxy/CA.crt

#gae appid
pen1120-1236|pen1121-1236|pen1122-1236|pen1123-1236|pen1124-1236|pen1125-1236|pen1126-1236
</code></pre>

<p>#3 Cmd Markdown
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.zybuluo.com/">Cmd Markdown下载地址</a>
#4 Transfer Folder Name To English Version</p>

<pre><code>export LANG=en_US
xdg-user-dirs-gtk-update
#在弹出的窗口中询问是否将目录转化为英文路径,同意并关闭
export LANG=zh_CN
</code></pre>

<p>#5 exFat for Ubuntu</p>

<pre><code>sudo apt-get install exfat-utils
</code></pre>

<p>#5 Sogou
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://pinyin.sogou.com/linux/">Sogou下载地址 </a></p>

<pre><code>#移除冲突
sudo apt remove fcitx*
sudo apt autoremove

#安装
sudo dpkg -i sogoupinyin*.deb
sudo apt -f install
</code></pre>

<p>#6 YaHei Consolas Hybrid 1.12</p>

<pre><code>wget -qO- https://raw.githubusercontent.com/yakumioto/YaHei-Consolas-Hybrid-1.12/master/install.sh | sudo sh
</code></pre>

<p>#7 小牛与诗</p>

<pre><code>#安装小工具
sudo apt install fortune
sudo apt install fortune-zh
sudo apt install cowsay
sudo apt install lolcat

#小牛讲道理
for i in {1..5};do echo `fortune`|cowsay;done

#加个颜色
for i in {1..5};do echo `fortune`|cowsay|lolcat;done

作者：实现
链接：https://www.zhihu.com/question/27764060/answer/120247778
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
</code></pre>

<p>#7 Sublime
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.sublimetext.com/2">Sublime2下载地址 </a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.sublimetext.com/3">Sublime3下载地址 </a></p>

<pre><code>#License Code
----- BEGIN LICENSE -----
Andrew Weber
Single User License
EA7E-855605
813A03DD 5E4AD9E6 6C0EEB94 BC99798F
942194A6 02396E98 E62C9979 4BB979FE
91424C9D A45400BF F6747D88 2FB88078
90F5CC94 1CDC92DC 8457107A F151657B
1D22E383 A997F016 42397640 33F41CFC
E1D0AE85 A0BBD039 0E9C8D55 E1B89D5D
5CDB7036 E56DE1C0 EFCC0840 650CD3A6
B98FC99C 8FAC73EE D2B95564 DF450523
------ END LICENSE ------

</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取地址 <a href="https://packagecontrol.io/installation#st2">https://packagecontrol.io/installation#st2</a></p>

<pre><code>#sublime 2
import urllib2,os,hashlib; h = 'df21e130d211cfc94d9b0905775a7c0f' + '1e3d39e33b79698005270310898eea76'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), 'wb' ).write(by) if dh == h else None; print('Error validating download (got %s instead of %s), please try manual install' % (dh, h) if dh != h else 'Please restart Sublime Text to finish installation')

#sublime3
import urllib.request,os,hashlib; h = 'df21e130d211cfc94d9b0905775a7c0f' + '1e3d39e33b79698005270310898eea76'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by)
</code></pre>

<p>#7 axel</p>

<pre><code>sudo apt install axel
</code></pre>

<p>#8 Git</p>

<pre><code>#Install
sudo apt install git

#Generating a new SSH key
ssh-keygen -t rsa -b 4096 -C &quot;wu.pen1120@gmail.com&quot;

#Adding it to the ssh-agent
eval &quot;$(ssh-agent -s)&quot;
ssh-add ~/.ssh/id_rsa
sudo apt-get install xclip
xclip -sel clip &lt; ~/.ssh/id_rsa.pub

#Adding a new SSH key to your GitHub account

#Testing your SSH connection
ssh -T git@github.com

#Starting to work
git clone ***
</code></pre>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ubuntu配置教程 <a href="https://help.github.com/articles/connecting-to-github-with-ssh/">https://help.github.com/articles/connecting-to-github-with-ssh/</a></p>

<pre><code>#进入当前用户目录
vi .git-credentials
#输入内容
https://{username}：{password}@github.com
git config --global credential.helper store
</code></pre>

<p>#9 Consolas
<strong>consolas字体可从Windows/Fonts获取</strong></p>

<pre><code>#字体写入Ubuntu系统
sudo mkdir /usr/share/fonts/consolas
sudo mv consola*.ttf /usr/share/fonts/consolas
sudo chmod 644 /usr/share/fonts/consolas/consola*.ttf
sudo fc-cache -fv

#拷贝到虚拟机，让JetBrains使用
sudo cp /usr/share/fonts/consolas/consola*.ttf /usr/lib/jvm/java-1.8-jdk/jre/lib/fonts/
sudo reboot
</code></pre>

<p>#7 Mac Theme
1、下载 macbuntu 壁纸：
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://pan.baidu.com/s/1skQCq2T">Download MacBuntu OS Wallpapers</a>
2、安装 MacBuntu OS Y Theme、Icons 和 cursors：</p>

<pre><code>#安装命令
sudo add-apt-repository ppa:noobslab/macbuntu
sudo apt-get update
sudo apt-get install macbuntu-os-icons-lts-v7
sudo apt-get install macbuntu-os-ithemes-lts-v7

#启用主题，需要安装 `tweak tool`

#卸载命令：
cd /usr/share/icons/mac-cursors &amp;&amp; sudo ./uninstall-mac-cursors.sh
sudo apt-get remove macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts-v7
</code></pre>

<p>3、安装 Slingscold（替代Launchpad）</p>

<pre><code>sudo add-apt-repository ppa:noobslab/macbuntu
sudo apt-get update
sudo apt-get install slingscold
</code></pre>

<p>4、安装Albert Spotlight (替代 Mac Spotlight)</p>

<pre><code>sudo add-apt-repository ppa:noobslab/macbuntu
sudo apt-get update
sudo apt-get install albert
</code></pre>

<p>5、安装 Plank Dock</p>

<pre><code>sudo apt-get install plank

#安装 Plank 主题：
sudo add-apt-repository ppa:noobslab/macbuntu
sudo apt-get update
sudo apt-get install macbuntu-os-plank-theme-lts-v7

#卸载主题命令：
sudo apt-get autoremove plank macbuntu-os-plank-theme-lts-v7
</code></pre>

<p>6、将面板上的 ‘Ubuntu Desktop’ 文字替换 ‘Mac’</p>

<pre><code>#替换命令
cd &amp;&amp; wget -O Mac.po http://drive.noobslab.com/data/Mac/change-name-on-panel/mac.po
cd /usr/share/locale/en/LC_MESSAGES; sudo msgfmt -o unity.mo ~/Mac.po;rm ~/Mac.po;cd

#语言上如果是其他非英语语言，将 /en 做相应修改：

#恢复命令
cd &amp;&amp; wget -O Ubuntu.po http://drive.noobslab.com/data/Mac/change-name-on-panel/ubuntu.po
cd /usr/share/locale/en/LC_MESSAGES; sudo msgfmt -o unity.mo ~/Ubuntu.po;rm ~/Ubuntu.po;cd
</code></pre>

<p>7、启动器上苹果Logo</p>

<pre><code>#替换命令
wget -O launcher_bfb.png http://drive.noobslab.com/data/Mac/launcher-logo/apple/launcher_bfb.png
sudo mv launcher_bfb.png /usr/share/unity/icons/


#恢复图标
wget -O launcher_bfb.png http://drive.noobslab.com/data/Mac/launcher-logo/ubuntu/launcher_bfb.png
sudo mv launcher_bfb.png /usr/share/unity/icons/
</code></pre>

<p>8、安装 Tweak tool 软件启用主题、图标等：</p>

<pre><code>sudo apt-get install unity-tweak-tool # Ubuntu16.04
sudo apt-get install gnome-tweak-tool
</code></pre>

<p>9、为 Libreoffice 安装 Monochrome icons：</p>

<pre><code>sudo apt-get install libreoffice-style-sifr
#然后在 LibreOffice 菜单进行设置 “Tools” &gt; “Options” &gt; “LibreOffice” &gt; “View” 选择 “Sifr” “Icon size and style”。参照下面截图设置：
</code></pre>

<p>10、配置 Mac 字体：</p>

<pre><code>#安装字体命令
wget -O mac-fonts.zip http://drive.noobslab.com/data/Mac/macfonts.zip
sudo unzip mac-fonts.zip -d /usr/share/fonts; rm mac-fonts.zip
sudo fc-cache -f -v

#使用 Unity-Tweak-Tool, Gnome-Tweak-Tool 或 Ubuntu Tweak 软件更换字体。
</code></pre>

<p>11、修改启动界面：</p>

<pre><code>sudo add-apt-repository ppa:noobslab/themes
sudo apt-get update
sudo apt-get install macbuntu-os-bscreen-lts-v7

#如果你喜欢 MBuntu 启动界面，你想恢复到 Ubuntu ，使用命令：
sudo apt-get autoremove macbuntu-os-bscreen-lts-v7
</code></pre>

<p>12、登陆迎宾界面：</p>

<pre><code>#注意安装这个东东有风险，如果你不是在意，建议不安装，安装这个仅仅适合于 Ubuntu Unity – Lightdm 和 Ubuntu Gnome – gdm，其他桌面环境有风险。

#安装命令
sudo add-apt-repository ppa:noobslab/themes
sudo apt-get update
sudo apt-get install macbuntu-os-lightdm-lts-v7

#恢复命令：
sudo apt-get remove macbuntu-os-lightdm-lts-v7
</code></pre>

<p>OK，完工，好好享受你的新桌面吧！</p>

<p>#10 Aspire 4750G 更改屏幕亮度</p>

<pre><code>#1.修改grub
sudo vi /etc/default/grub
GRUB_CMDLINE_LINUX=&quot;acpi_backlight=vendor&quot;

#2.更新grub.cfg
sudo update-grub
sudo chmod 777 /sys/class/backlight/intel_backlight/brightness
sudo vi /sys/class/backlight/intel_backlight/brightness
#更改brightness的值，范围为[0,976]
sudo echo 345 &gt; /sys/class/backlight/intel_backlight/brightness
</code></pre>

<p>#11 删除冗余软件</p>

<pre><code>sudo apt-get purge firefo*
sudo apt-get remove libreoffic*
sudo apt-get remove thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot
</code></pre>

<p>#12 DropBox
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.dropbox.com/install-linux">DropBox下载地址</a>
#13 Foxit Reader
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://www.foxitsoftware.cn/downloads/">Foxit Reader 下载地址</a></p>

            <p class="post-info">
                本文由
                
                    <a href="https://pen1120.github.io/about">
                pen.wyp 
                
                </a> 创作，采用
                <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external nofollow">知识共享署名4.0</a>                
                国际许可协议进行许可，转载请注明出处！<br>
            </p>
        </div>
    </article>

    <div id="post-bottom-bar" class="post-bottom-bar">
        <div class="bottom-bar-inner">
            <div class="bottom-bar-items social-share left">
                <span class="bottom-bar-item">Share : </span>
                <span class="bottom-bar-item bottom-bar-facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fpen1120.github.io%2fpost%2fubuntu%25E9%2587%258D%25E8%25A3%2585%2f" target="_blank" title="Ubuntu重装" rel="nofollow">Facebook</a></span>
                <span class="bottom-bar-item bottom-bar-twitter"><a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fpen1120.github.io%2fpost%2fubuntu%25E9%2587%258D%25E8%25A3%2585%2f&text=Ubuntu%e9%87%8d%e8%a3%85" target="_blank" title="Ubuntu重装" rel="nofollow">Twitter</a></span>
                <span class="bottom-bar-item bottom-bar-weibo"><a href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fpen1120.github.io%2fpost%2fubuntu%25E9%2587%258D%25E8%25A3%2585%2f&amp;title=Ubuntu%e9%87%8d%e8%a3%85" target="_blank" title="Ubuntu重装" rel="nofollow">Weibo</a></span>
                <span class="bottom-bar-item bottom-bar-qrcode"><a href="//pan.baidu.com/share/qrcode?w=300&amp;h=300&amp;url=https%3a%2f%2fpen1120.github.io%2fpost%2fubuntu%25E9%2587%258D%25E8%25A3%2585%2f" target="_blank" rel="nofollow">QRcode</a></span>
            </div>

            <div class="bottom-bar-items right">
                
                <span class="bottom-bar-item"><a href="https://pen1120.github.io/about/" title="About">←</a></span> 
                
                <span class="bottom-bar-item"><a href="https://pen1120.github.io/post/%E8%87%AA%E5%A2%9E%E9%94%81/" title="自增锁">→</a></span> 
                <span class="bottom-bar-item"></span> <span class="bottom-bar-item"><a href="#footer">↓</a></span>
                <span class="bottom-bar-item"><a href="#">↑</a></span>
            </div>
            
        </div>
    </div>

    

<div class="comment-container">
    <div id="comments" class="clearfix">
         
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "mjyi-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> 
        
    </div>
</div>

 <footer id="footer" class="footer bg-white">
    <div class="footer-social">
        <div class="footer-container clearfix">
            <div class="social-list">
                
                
                <a class="social" target="blank" href="mailto:wu.pen1120@gmail.com">Email</a>  
                
                <a class="social" target="blank" href="https://github.com/pen1120">Github</a>  
                
                <a class="social" target="blank" href="https://pen1120.github.io/index.xml">RSS</a>  
            </div>
        </div>
    </div>
    <div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
                    <br>
                    <div class="info-text">
                        <p id="chakhsu"> </p>
                        <p>Theme is <a href="https://github.com/mjyi/Gemini" target="_blank" rel="nofollow">Gemini</a> by Chakhsu</p>
                        <p>Powered by <a href="https://gohugo.io/" target="_blank" rel="nofollow">Hugo</a></p>
                        <p> &copy; 2017 <a href="https://pen1120.github.io">pen.wyp</a></p>
                    </div>
                </div>
            </div>

            <div class="meta-item meta-comments">
                <h3 class="meta-title">CATEGORIES</h3>
                <li><a href="https://pen1120.github.io/categories/mysql">Mysql</a>(3)</li>
                <li><a href="https://pen1120.github.io/categories/ubuntu">Ubuntu</a>(1)</li>
            </div>
            <div class="meta-item meta-posts">
                <h3 class="meta-title">RECENT POSTS</h3>
                 
                <li><a href="https://pen1120.github.io/post/ubuntu%E9%87%8D%E8%A3%85/">Ubuntu重装</a></li>
                  
                <li><a href="https://pen1120.github.io/post/%E8%87%AA%E5%A2%9E%E9%94%81/">自增锁</a></li>
                  
                <li><a href="https://pen1120.github.io/post/oak/">Oak</a></li>
                  
                <li><a href="https://pen1120.github.io/post/mysql/%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/">初始化主从复制</a></li>
                   

            </div>
        </div>
    </div>
    </div>
</footer>

 
    <div id="directory-content" class="directory-content">
        <div id="directory"></div>
    </div>
    <script>
    var postDirectoryBuild = function() {
        var postChildren = function children(childNodes, reg) {
                var result = [],
                    isReg = typeof reg === 'object',
                    isStr = typeof reg === 'string',
                    node, i, len;
                for (i = 0, len = childNodes.length; i < len; i++) {
                    node = childNodes[i];
                    if ((node.nodeType === 1 || node.nodeType === 9) && (!reg || isReg && reg.test(node.tagName.toLowerCase()) || isStr && node.tagName.toLowerCase() === reg)) {
                        result.push(node);
                    }
                }
                return result;
            },
            createPostDirectory = function(article, directory, isDirNum) {
                var contentArr = [],
                    titleId = [],
                    levelArr, root, level, currentList, list, li, link, i, len;
                levelArr = (function(article, contentArr, titleId) {
                    var titleElem = postChildren(article.childNodes, /^h\d$/),
                        levelArr = [],
                        lastNum = 1,
                        lastRevNum = 1,
                        count = 0,
                        guid = 1,
                        id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                        lastRevNum, num, elem;
                    while (titleElem.length) {
                        elem = titleElem.shift();
                        contentArr.push(elem.innerHTML);
                        num = +elem.tagName.match(/\d/)[0];
                        if (num > lastNum) {
                            levelArr.push(1);
                            lastRevNum += 1;
                        } else if (num === lastRevNum || num > lastRevNum && num <= lastNum) {
                            levelArr.push(0);
                            lastRevNum = lastRevNum;
                        } else if (num < lastRevNum) {
                            levelArr.push(num - lastRevNum);
                            lastRevNum = num;
                        }
                        count += levelArr[levelArr.length - 1];
                        lastNum = num;
                        elem.id = elem.id || (id + guid++);
                        titleId.push(elem.id);
                    }
                    if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;
                    return levelArr;
                })(article, contentArr, titleId);
                currentList = root = document.createElement('ul');
                dirNum = [0];
                for (i = 0, len = levelArr.length; i < len; i++) {
                    level = levelArr[i];
                    if (level === 1) {
                        list = document.createElement('ul');
                        if (!currentList.lastElementChild) {
                            currentList.appendChild(document.createElement('li'));
                        }
                        currentList.lastElementChild.appendChild(list);
                        currentList = list;
                        dirNum.push(0);
                    } else if (level < 0) {
                        level *= 2;
                        while (level++) {
                            if (level % 2) dirNum.pop();
                            currentList = currentList.parentNode;
                        }
                    }
                    dirNum[dirNum.length - 1]++;
                    li = document.createElement('li');
                    link = document.createElement('a');
                    link.href = '#' + titleId[i];
                    link.innerHTML = !isDirNum ? contentArr[i] : dirNum.join('.') + ' ' + contentArr[i];
                    li.appendChild(link);
                    currentList.appendChild(li);
                }
                directory.appendChild(root);
            };
        createPostDirectory(document.getElementById('post-content'), document.getElementById('directory'), true);
    };
    postDirectoryBuild();
    </script> 


<script src="//cdn.bootcss.com/headroom/0.9.1/headroom.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.10.0/highlight.min.js"></script>
<script src="https://pen1120.github.io/js/instantclick.min.js?v20140319"></script>
<script src="//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
<script>


    var postDirectory = new Headroom(document.getElementById("directory-content"), {
        tolerance: 0,
        offset: 90,
        classes: {
            initial: "initial",
            pinned: "pinned",
            unpinned: "unpinned"
        }
    });
    postDirectory.init();


     var postSharer = new Headroom(document.getElementById("post-bottom-bar"), {
        tolerance: 0,
        offset: 70,
        classes: {
            initial: "animated",
            pinned: "pinned",
            unpinned: "unpinned"
        }
    });
    postSharer.init();




    var header = new Headroom(document.getElementById("header"), {
        tolerance: 0,
        offset: 70,
        classes: {
            initial: "animated",
            pinned: "slideDown",
            unpinned: "slideUp"
        }
    });
    header.init();
    var chakhsu = function (r) {
        function t() {
            return b[Math.floor(Math.random() * b.length)]
        }

        function e() {
            return String.fromCharCode(94 * Math.random() + 33)
        }

        function n(r) {
            for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {
                var l = document.createElement("span");
                l.textContent = e(), l.style.color = t(), n.appendChild(l)
            }
            return n
        }

        function i() {
            var t = o[c.skillI];
            c.step ? c.step-- : (c.step = g, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : "forward" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = "backward", c.delay = a) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % o.length, c.direction = "forward")), r.textContent = c.text, r.appendChild(n(c.prefixP < l.length ? Math.min(s, s + c.prefixP) : Math.min(s, t.length - c.skillP))), setTimeout(i, d)
        }
        var l = "",
            o = ["I am a DBA","Work in Guangzhou"].map(function (r) {
                return r + "."
            }),
            a = 2,
            g = 1,
            s = 5,
            d = 75,
            b = ["rgb(110,64,170)", "rgb(150,61,179)", "rgb(191,60,175)", "rgb(228,65,157)", "rgb(254,75,131)", "rgb(255,94,99)", "rgb(255,120,71)", "rgb(251,150,51)", "rgb(226,183,47)", "rgb(198,214,60)", "rgb(175,240,91)", "rgb(127,246,88)", "rgb(82,246,103)", "rgb(48,239,130)", "rgb(29,223,163)", "rgb(26,199,194)", "rgb(35,171,216)", "rgb(54,140,225)", "rgb(76,110,219)", "rgb(96,84,200)"],
            c = {
                text: "",
                prefixP: -s,
                skillI: 0,
                skillP: 0,
                direction: "forward",
                delay: a,
                step: g
            };
        i()
    };
    chakhsu(document.getElementById('chakhsu'));
    if ('addEventListener' in document) {
        document.addEventListener('DOMContentLoaded', function () {
            FastClick.attach(document.body);
        }, false);
    }

</script>
<script type="text/x-mathjax-config"> MathJax.Hub.Config({ showProcessingMessages: false, messageStyle: "none", extensions: ["tex2jax.js"], jax: ["input/TeX",
    "output/HTML-CSS"], tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a'], ignoreClass:"comment-content" }, "HTML-CSS":
    { availableFonts: ["STIX","TeX"], showMathMenu: false } }); MathJax.Hub.Queue(["Typeset",MathJax.Hub]); </script>
<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script data-no-instant>
    InstantClick.on('change', function (isInitialLoad) {
        var blocks = document.querySelectorAll('pre code');
        for (var i = 0; i < blocks.length; i++) {
            hljs.highlightBlock(blocks[i]);
        }
        if (isInitialLoad === false) {
            if (typeof ga !== 'undefined') ga('send', 'pageview', location.pathname + location.search);
            if (typeof MathJax !== 'undefined') {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            }
        }
    });
    InstantClick.init('mousedown');

</script>


</body>

</html>
